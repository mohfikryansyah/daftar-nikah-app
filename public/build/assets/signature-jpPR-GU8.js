import{g as j,U as q,r as P,j as R}from"./app-CAKI_gIR.js";import{B as $}from"./button-D1SFdmt1.js";import"./index-DuztS2su.js";import"./utils-CfaLvSjR.js";function W(){return W=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},W.apply(null,arguments)}function H(e,n){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(n.indexOf(t)!==-1)continue;r[t]=e[t]}return r}function Y(e,n){if(e==null)return{};var r,t,o=H(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function k(e){"@babel/helpers - typeof";return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},k(e)}function X(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function L(e,n){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},L(e,n)}function G(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&L(e,n)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C(e)}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A=function(){return!!e})()}function J(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,n){if(n&&(k(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function Q(e){var n=A();return function(){var r,t=C(e);if(n){var o=C(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return K(this,r)}}var D={exports:{}},O,U;function Z(){if(U)return O;U=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return O=e,O}var M,B;function tt(){if(B)return M;B=1;var e=Z();function n(){}function r(){}return r.resetWarningCache=n,M=function(){function t(c,i,s,h,l,u){if(u!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function o(){return t}var a={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:o,element:t,elementType:t,instanceOf:o,node:t,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:n};return a.PropTypes=a,a},M}var F;function et(){return F||(F=1,D.exports=tt()()),D.exports}var nt=et();const _=j(nt);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function E(e,n,r){this.x=e,this.y=n,this.time=r||new Date().getTime()}E.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1};E.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};E.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time};function z(e,n,r,t){this.startPoint=e,this.control1=n,this.control2=r,this.endPoint=t}z.prototype.length=function(){for(var e=10,n=0,r=void 0,t=void 0,o=0;o<=e;o+=1){var a=o/e,c=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),i=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var s=c-r,h=i-t;n+=Math.sqrt(s*s+h*h)}r=c,t=i}return n};z.prototype._point=function(e,n,r,t,o){return n*(1-e)*(1-e)*(1-e)+3*r*(1-e)*(1-e)*e+3*t*(1-e)*e*e+o*e*e*e};function rt(e,n,r){var t,o,a,c=null,i=0;r||(r={});var s=function(){i=r.leading===!1?0:Date.now(),c=null,a=e.apply(t,o),c||(t=o=null)};return function(){var h=Date.now();!i&&r.leading===!1&&(i=h);var l=n-(h-i);return t=this,o=arguments,l<=0||l>n?(c&&(clearTimeout(c),c=null),i=h,a=e.apply(t,o),c||(t=o=null)):!c&&r.trailing!==!1&&(c=setTimeout(s,l)),a}}function f(e,n){var r=this,t=n||{};this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=rt(f.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=f.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(o){o.which===1&&(r._mouseButtonDown=!0,r._strokeBegin(o))},this._handleMouseMove=function(o){r._mouseButtonDown&&r._strokeMoveUpdate(o)},this._handleMouseUp=function(o){o.which===1&&r._mouseButtonDown&&(r._mouseButtonDown=!1,r._strokeEnd(o))},this._handleTouchStart=function(o){if(o.targetTouches.length===1){var a=o.changedTouches[0];r._strokeBegin(a)}},this._handleTouchMove=function(o){o.preventDefault();var a=o.targetTouches[0];r._strokeMoveUpdate(a)},this._handleTouchEnd=function(o){var a=o.target===r._canvas;a&&(o.preventDefault(),r._strokeEnd(o))},this.on()}f.prototype.clear=function(){var e=this._ctx,n=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,n.width,n.height),e.fillRect(0,0,n.width,n.height),this._data=[],this._reset(),this._isEmpty=!0};f.prototype.fromDataURL=function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new Image,o=r.ratio||window.devicePixelRatio||1,a=r.width||this._canvas.width/o,c=r.height||this._canvas.height/o;this._reset(),t.src=e,t.onload=function(){n._ctx.drawImage(t,0,0,a,c)},this._isEmpty=!1};f.prototype.toDataURL=function(e){var n;switch(e){case"image/svg+xml":return this._toSVG();default:for(var r=arguments.length,t=Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];return(n=this._canvas).toDataURL.apply(n,[e].concat(t))}};f.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};f.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};f.prototype.isEmpty=function(){return this._isEmpty};f.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),typeof this.onBegin=="function"&&this.onBegin(e)};f.prototype._strokeUpdate=function(e){var n=e.clientX,r=e.clientY,t=this._createPoint(n,r),o=this._data[this._data.length-1],a=o&&o[o.length-1],c=a&&t.distanceTo(a)<this.minDistance;if(!(a&&c)){var i=this._addPoint(t),s=i.curve,h=i.widths;s&&h&&this._drawCurve(s,h.start,h.end),this._data[this._data.length-1].push({x:t.x,y:t.y,time:t.time,color:this.penColor})}};f.prototype._strokeEnd=function(e){var n=this.points.length>2,r=this.points[0];if(!n&&r&&this._drawDot(r),r){var t=this._data[this._data.length-1],o=t[t.length-1];r.equals(o)||t.push({x:r.x,y:r.y,time:r.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(e)};f.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};f.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};f.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};f.prototype._createPoint=function(e,n,r){var t=this._canvas.getBoundingClientRect();return new E(e-t.left,n-t.top,r||new Date().getTime())};f.prototype._addPoint=function(e){var n=this.points,r=void 0;if(n.push(e),n.length>2){n.length===3&&n.unshift(n[0]),r=this._calculateCurveControlPoints(n[0],n[1],n[2]);var t=r.c2;r=this._calculateCurveControlPoints(n[1],n[2],n[3]);var o=r.c1,a=new z(n[1],t,o,n[2]),c=this._calculateCurveWidths(a);return n.shift(),{curve:a,widths:c}}return{}};f.prototype._calculateCurveControlPoints=function(e,n,r){var t=e.x-n.x,o=e.y-n.y,a=n.x-r.x,c=n.y-r.y,i={x:(e.x+n.x)/2,y:(e.y+n.y)/2},s={x:(n.x+r.x)/2,y:(n.y+r.y)/2},h=Math.sqrt(t*t+o*o),l=Math.sqrt(a*a+c*c),u=i.x-s.x,d=i.y-s.y,p=l/(h+l),v={x:s.x+u*p,y:s.y+d*p},y=n.x-v.x,g=n.y-v.y;return{c1:new E(i.x+y,i.y+g),c2:new E(s.x+y,s.y+g)}};f.prototype._calculateCurveWidths=function(e){var n=e.startPoint,r=e.endPoint,t={start:null,end:null},o=this.velocityFilterWeight*r.velocityFrom(n)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(o);return t.start=this._lastWidth,t.end=a,this._lastVelocity=o,this._lastWidth=a,t};f.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};f.prototype._drawPoint=function(e,n,r){var t=this._ctx;t.moveTo(e,n),t.arc(e,n,r,0,2*Math.PI,!1),this._isEmpty=!1};f.prototype._drawCurve=function(e,n,r){var t=this._ctx,o=r-n,a=Math.floor(e.length());t.beginPath();for(var c=0;c<a;c+=1){var i=c/a,s=i*i,h=s*i,l=1-i,u=l*l,d=u*l,p=d*e.startPoint.x;p+=3*u*i*e.control1.x,p+=3*l*s*e.control2.x,p+=h*e.endPoint.x;var v=d*e.startPoint.y;v+=3*u*i*e.control1.y,v+=3*l*s*e.control2.y,v+=h*e.endPoint.y;var y=n+h*o;this._drawPoint(p,v,y)}t.closePath(),t.fill()};f.prototype._drawDot=function(e){var n=this._ctx,r=typeof this.dotSize=="function"?this.dotSize():this.dotSize;n.beginPath(),this._drawPoint(e.x,e.y,r),n.closePath(),n.fill()};f.prototype._fromData=function(e,n,r){for(var t=0;t<e.length;t+=1){var o=e[t];if(o.length>1)for(var a=0;a<o.length;a+=1){var c=o[a],i=new E(c.x,c.y,c.time),s=c.color;if(a===0)this.penColor=s,this._reset(),this._addPoint(i);else if(a!==o.length-1){var h=this._addPoint(i),l=h.curve,u=h.widths;l&&u&&n(l,u,s)}}else{this._reset();var d=o[0];r(d)}}};f.prototype._toSVG=function(){var e=this,n=this._data,r=this._canvas,t=Math.max(window.devicePixelRatio||1,1),o=0,a=0,c=r.width/t,i=r.height/t,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"width",r.width),s.setAttributeNS(null,"height",r.height),this._fromData(n,function(m,x,b){var w=document.createElement("path");if(!isNaN(m.control1.x)&&!isNaN(m.control1.y)&&!isNaN(m.control2.x)&&!isNaN(m.control2.y)){var I="M "+m.startPoint.x.toFixed(3)+","+m.startPoint.y.toFixed(3)+" "+("C "+m.control1.x.toFixed(3)+","+m.control1.y.toFixed(3)+" ")+(m.control2.x.toFixed(3)+","+m.control2.y.toFixed(3)+" ")+(m.endPoint.x.toFixed(3)+","+m.endPoint.y.toFixed(3));w.setAttribute("d",I),w.setAttribute("stroke-width",(x.end*2.25).toFixed(3)),w.setAttribute("stroke",b),w.setAttribute("fill","none"),w.setAttribute("stroke-linecap","round"),s.appendChild(w)}},function(m){var x=document.createElement("circle"),b=typeof e.dotSize=="function"?e.dotSize():e.dotSize;x.setAttribute("r",b),x.setAttribute("cx",m.x),x.setAttribute("cy",m.y),x.setAttribute("fill",m.color),s.appendChild(x)});var h="data:image/svg+xml;base64,",l='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+o+" "+a+" "+c+" "+i+'"')+(' width="'+c+'"')+(' height="'+i+'"')+">",u=s.innerHTML;if(u===void 0){var d=document.createElement("dummy"),p=s.childNodes;d.innerHTML="";for(var v=0;v<p.length;v+=1)d.appendChild(p[v].cloneNode(!0));u=d.innerHTML}var y="</svg>",g=l+u+y;return h+btoa(g)};f.prototype.fromData=function(e){var n=this;this.clear(),this._fromData(e,function(r,t){return n._drawCurve(r,t.start,t.end)},function(r){return n._drawDot(r)}),this._data=e};f.prototype.toData=function(){return this._data};var T={exports:{}},ot=T.exports,N;function it(){return N||(N=1,function(e,n){(function(r,t){e.exports=t()})(ot,function(){return function(r){function t(a){if(o[a])return o[a].exports;var c=o[a]={exports:{},id:a,loaded:!1};return r[a].call(c.exports,c,c.exports,t),c.loaded=!0,c.exports}var o={};return t.m=r,t.c=o,t.p="",t(0)}([function(r,t){function o(h){var l=h.getContext("2d"),u=h.width,d=h.height,p=l.getImageData(0,0,u,d).data,v=i(!0,u,d,p),y=i(!1,u,d,p),g=s(!0,u,d,p),m=s(!1,u,d,p),x=m-g+1,b=y-v+1,w=l.getImageData(g,v,x,b);return h.width=x,h.height=b,l.clearRect(0,0,x,b),l.putImageData(w,0,0),h}function a(h,l,u,d){return{red:d[4*(u*l+h)],green:d[4*(u*l+h)+1],blue:d[4*(u*l+h)+2],alpha:d[4*(u*l+h)+3]}}function c(h,l,u,d){return a(h,l,u,d).alpha}function i(h,l,u,d){for(var p=h?1:-1,v=h?0:u-1,y=v;h?y<u:y>-1;y+=p)for(var g=0;g<l;g++)if(c(g,y,l,d))return y;return null}function s(h,l,u,d){for(var p=h?1:-1,v=h?0:l-1,y=v;h?y<l:y>-1;y+=p)for(var g=0;g<u;g++)if(c(y,g,l,d))return y;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o}])})}(T)),T.exports}var at=it();const st=j(at);var ct=["canvasProps","clearOnResize"],S=function(e){G(r,e);var n=Q(r);function r(){var t;V(this,r);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return t=n.call.apply(n,[this].concat(a)),t.staticThis=t.constructor,t._sigPad=null,t._canvas=null,t.setRef=function(i){t._canvas=i,t._canvas===null&&(t._sigPad=null)},t._excludeOurProps=function(){var i=t.props;i.canvasProps,i.clearOnResize;var s=Y(i,ct);return s},t.componentDidMount=function(){var i=t.getCanvas();t._sigPad=new f(i,t._excludeOurProps()),t._resizeCanvas(),t.on()},t.componentWillUnmount=function(){t.off()},t.componentDidUpdate=function(){Object.assign(t._sigPad,t._excludeOurProps())},t.getCanvas=function(){if(t._canvas===null)throw t.staticThis.refNullError;return t._canvas},t.getTrimmedCanvas=function(){var i=t.getCanvas(),s=document.createElement("canvas");return s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),st(s)},t.getSignaturePad=function(){if(t._sigPad===null)throw t.staticThis.refNullError;return t._sigPad},t._checkClearOnResize=function(){t.props.clearOnResize&&t._resizeCanvas()},t._resizeCanvas=function(){var i,s,h=(i=t.props.canvasProps)!==null&&i!==void 0?i:{},l=h.width,u=h.height;if(!(typeof l<"u"&&typeof u<"u")){var d=t.getCanvas(),p=Math.max((s=window.devicePixelRatio)!==null&&s!==void 0?s:1,1);typeof l>"u"&&(d.width=d.offsetWidth*p),typeof u>"u"&&(d.height=d.offsetHeight*p),d.getContext("2d").scale(p,p),t.clear()}},t.render=function(){var i=t.props.canvasProps;return q.createElement("canvas",W({ref:t.setRef},i))},t.on=function(){return window.addEventListener("resize",t._checkClearOnResize),t.getSignaturePad().on()},t.off=function(){return window.removeEventListener("resize",t._checkClearOnResize),t.getSignaturePad().off()},t.clear=function(){return t.getSignaturePad().clear()},t.isEmpty=function(){return t.getSignaturePad().isEmpty()},t.fromDataURL=function(i,s){return t.getSignaturePad().fromDataURL(i,s)},t.toDataURL=function(i,s){return t.getSignaturePad().toDataURL(i,s)},t.fromData=function(i){return t.getSignaturePad().fromData(i)},t.toData=function(){return t.getSignaturePad().toData()},t}return X(r)}(P.Component);S.propTypes={velocityFilterWeight:_.number,minWidth:_.number,maxWidth:_.number,minDistance:_.number,dotSize:_.oneOfType([_.number,_.func]),penColor:_.string,throttle:_.number,onEnd:_.func,onBegin:_.func,canvasProps:_.object,clearOnResize:_.bool};S.defaultProps={clearOnResize:!0};S.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const ft=({onChange:e,defaultValue:n})=>{const r=P.useRef(null),t=P.useRef(null),[o,a]=P.useState({width:400,height:200}),[c,i]=P.useState(!1),s=P.useRef(void 0);P.useEffect(()=>{const u=r.current;if(u){const d=u.offsetWidth;a({width:d,height:200})}},[]),P.useEffect(()=>{if(n&&t.current&&n!==s.current&&!c){const u=t.current.getCanvas();u.width=o.width,u.height=o.height,u.style.width=`${o.width}px`,u.style.height=`${o.height}px`,t.current.clear(),setTimeout(()=>{t.current&&n&&(t.current.fromDataURL(n),i(!0),s.current=n)},100)}},[n,o.width,c]);const h=()=>{var u;(u=t.current)==null||u.clear(),i(!1),s.current=void 0,e(null)},l=async()=>{const u=t.current;if(!u||u.isEmpty())return;const d=u.toDataURL("image/png"),p=await(await fetch(d)).blob(),v=new File([p],`ttd-${Date.now()}.png`,{type:"image/png"});e(v),i(!0)};return R.jsxs("div",{ref:r,className:"w-full",children:[R.jsx(S,{ref:t,penColor:"black",canvasProps:{width:o.width,height:o.height,className:"border border-black rounded-xl w-full"},onEnd:l}),R.jsx($,{type:"button",variant:"ghost",onClick:h,children:"Bersihkan"})]})};export{ft as default};
